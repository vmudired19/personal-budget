<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Added meta description for SEO -->
    <meta name="description" content="Manage your personal budget effectively with this free app. Stay on track, receive alerts, and achieve financial goals.">
    <!-- Optimized page title for SEO -->
    <title>Personal Budget Management App - Track Expenses, Get Alerts, and Achieve Financial Goals</title>
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="main.css">
    <!-- Added CSS for navigation bar animation -->
    <style>
        

        h1.glide {
            position: relative;
            top: 45%;
            left: 55%;
            transform: translate(35%, -150%);
            animation: glideAnimation 10s linear infinite;
        }

        @keyframes glideAnimation {
            0%, 100% {
                left: -120%;
            }
            50% {
                left: 50%;
            }
        }
    </style>
</head>

<body>
    <!-- This is an SEO Change -->
    <script type="application/ld+json">
        {
          "@context": "https://schema.org",
          "@type": "BreadcrumbList",
          "itemListElement": [
            {
              "@type": "ListItem",
              "position": 1,
              "name": "Homepage",
              "item": "URL_TO_HOME"
            },
            {
              "@type": "ListItem",
              "position": 2,
              "name": "About",
              "item": "URL_TO_ABOUT"
            },
            {
              "@type": "ListItem",
              "position": 3,
              "name": "Login",
              "item": "URL_TO_LOGIN"
            }
          ]
        }
      </script>
      
    


    <!-- Added skip-link functionality using JavaScript for A11y -->
    <a href="#main-content" class="skip-link" onclick="skipToMainContent()">Skip to main content</a>

    <!-- Changed div to nav for better semantics -->
    <nav class="menu" role="navigation">
        <ul>
            <li><a href="/">Homepage</a></li>
            <li><a href="/about.html">About</a></li>
            <li><a href="/login.html">Login</a></li>
            <li><a href="https://google.com">Google</a></li>
        </ul>
    </nav>

    <!-- Changed div to header for better semantics -->
    <header class="hero fade-in">
        <!-- Added gliding h1 element -->
        <h1 class="glide">Personal Budget</h1>
        <h2>A personal-budget management app</h2>
    </header>

    <!-- Changed div to section for better semantics -->
    <section class="container center" role="main">

        <!-- Changed div to article for better semantics -->
        <article id="main-content" class="page-area fade-in">

            <!-- Changed div to section for better semantics -->
            <section class="text-box">
                <!-- Added the semantic and seo change to the H1 header hover function the h1-->
                <h1>Stay on track</h1>
                <p>
                    Do you know where you are spending your money? If you really stop to track it down,
                    you would get surprised! Proper budget management depends on real data... and this
                    app will help you with that!
                </p>
            </section>

            <!-- Changed div to section for better semantics -->
            <section class="text-box">
                <h1>Alerts</h1>
                <p>
                    What if your clothing budget ended? You will get an alert. The goal is to never go over the budget.
                </p>
            </section>

            <!-- Changed div to section for better semantics -->
            <section class="text-box">
                <h1>Results</h1>
                <p>
                    People who stick to a financial plan, budgeting every expense, get out of debt faster!
                    Also, they to live happier lives... since they expend without guilt or fear...
                    because they know it is all good and accounted for.
                </p>
            </section>

            <!-- Changed div to section for better semantics seo and semantic-->
            <section class="text-box">
                <h1>Chart</h1>
                <p>
                    <canvas id="myChart" width="400" height="400"></canvas>
                </p>
            </section>

        </article>

    </section>

    <!-- Changed div to footer for better semantics -->
    <footer class="bottom fade-in">
        <div class="center">
            All rights reserved &copy; Fabio Nolasco
        </div>
    </footer>

    <!-- Added JavaScript function for skip-link functionality and animation A11y-->
    <script>
        function skipToMainContent() {
            document.getElementById('main-content').scrollIntoView({ behavior: 'smooth' });
        }

        // Adding fade-in animation after the page has loaded A11y semantic
        document.addEventListener('DOMContentLoaded', function () {
            const elementsToFadeIn = document.querySelectorAll('.fade-in');
            elementsToFadeIn.forEach((element) => {
                element.classList.add('show');
            });
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.7/axios.min.js" integrity="sha512-NQfB/bDaB8kaSXF8E77JjhHG5PM6XVRxvHzkZiwl3ddWCEPBa23T76MuWSwAJdMGJnmQqM0VeY9kFszsrBEFrQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.min.js" integrity="sha512-L0Shl7nXXzIlBSUUPpxrokqq4ojqgZFQczTYlGjzONGTDAcLremjwaWv5A+EDLnxhQzY5xUZPWLOLqYRkY0Cbw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        var dataSource = {
            datasets: [
                {
                    data: [70, 200, 108, 152, 100, 95, 155], // Adjusted values for better visualization
                    backgroundColor: [
                        '#ffcd56',
                        '#ff6384',
                        '#fd6b19',
                        '#AE00FF',
                        '#00D8FF',
                        '#68C393',
                        'A7C368'
                    ],
                }
            ],
            labels: [
                'Concerts',
                'Utilities',
                'Groceries',
                'Restaurents',
                'Movies',
                'Gas',
                'Room Rent'
            ]
        };
    
        function createChart() {
    var ctx = document.getElementById("myChart").getContext("2d");

    // Check if the chart already exists and destroy it
    if (window.myPieChart) {
        window.myPieChart.destroy();
    }

    // Create a new chart with the updated data source
    window.myPieChart = new Chart(ctx, {
        type: 'pie',
        data: dataSource,
        options: {
            responsive: true,
            maintainAspectRatio: false // Add this option for better responsiveness
        }
    });
}

        function getBudget() {
            axios.get('/budget')
            .then(function (res) {
            console.log(res.data);
            for (var i = 0; i < res.data.length; i++) {
                dataSource.datasets[0].data[i] = res.data.myBudget[i].budget;
                dataSource.labels[i] = res.data.myBudget[i].title;
                //dataSource.datasets[0].backgroundColor[i] = res.data[i].color;
            }
        })
        .then(function () {
            createChart();
        })
        .catch(function (error) {
            console.error('Error fetching budget data:', error);
        });
    }
    getBudget();
    createChart();
    
    </script>
    
</body>

</html>
